<!DOCTYPE html>
<html>
<head>
{% load static %}
{% load crispy_forms_tags %}
<title>Create a new user</title>
<link rel="stylesheet" type="text/css" href="{% static 'styles.css' %}"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
$(document).ready(function () {
$("#signup_form").on("submit", function(){
$.ajax({
    url: "{% url 'signup' %}",
    dataType: 'json',
    method: 'post',
    data: $(this).serialize(),
    success: function(data) {
    	alert("LL");
    	var button_tag = data['form_html'] + '<button class="form_auth_button" type="submit" name="button" >Create user</button>';
        if (!(data.success)) {
            $('#signup_form').replaceWith(button_tag);
            //$('#signup_form').append(button_tag);
        }
        else {
            // Here you can show the user a success message or do whatever you need
            //$('#signup_form').find('.success-message').show();
            alert("ZZZZZZz");
        }
    },
    error: function (response) {
    	    	alert(response);
        console.log(response.responseJSON.errors);
    }
});
return false;
});
});
</script>
<style>
		span{
        font-weight: normal;
        color: green;
        font-size: 10px;
        }
        .invalid-feedback::before {
        content: "\a";
        white-space: pre;
        }

</style>
</head>
<body>
  <div class="form_signup_block">
	<p>Please input the following information to create a new account</p>
	<form id="signup_form" method="post">
		{% csrf_token %}
		{{ form | crispy }}
		<button class="form_auth_button" type="submit" name="button" >Create user</button>
	</form>
  </div>
</body>
</html>
